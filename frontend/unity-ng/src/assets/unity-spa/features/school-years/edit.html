<div class="max-w-4xl mx-auto space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <h1 class="text-2xl font-semibold text-gray-900">{{ vm.title }}</h1>
    <div class="flex items-center space-x-3">
      <button type="button"
              class="inline-flex items-center px-4 py-2 rounded-md border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"
              ng-click="vm.cancel()">
        <i class="fas fa-arrow-left mr-2"></i>
        Back
      </button>
      <button type="button"
              class="inline-flex items-center px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50"
              ng-disabled="vm.loading"
              ng-click="vm.save()">
        <i class="fas fa-save mr-2"></i>
        Save
      </button>
    </div>
  </div>

  <!-- Error / Success -->
  <div ng-if="vm.error" class="rounded-md bg-red-50 p-3 text-sm text-red-700">
    {{ vm.error }}
  </div>
  <div ng-if="vm.success" class="rounded-md bg-green-50 p-3 text-sm text-green-700">
    {{ vm.success }}
  </div>

  <!-- Form -->
  <div class="bg-white border border-gray-200 rounded-lg p-6">
    <!-- Tabs -->
    <div class="border-b border-gray-200 mb-6">
      <nav class="-mb-px flex flex-wrap gap-2">
        <button type="button"
                ng-click="vm.setTab('core')"
                ng-class="vm.isTab('core') ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                class="px-3 py-2 text-sm font-medium border-b-2 focus:outline-none">
          Core
        </button>
        <button type="button"
                ng-click="vm.setTab('grading')"
                ng-class="vm.isTab('grading') ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                class="px-3 py-2 text-sm font-medium border-b-2 focus:outline-none">
          Grading Windows
        </button>
        <button type="button"
                ng-click="vm.setTab('academic')"
                ng-class="vm.isTab('academic') ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                class="px-3 py-2 text-sm font-medium border-b-2 focus:outline-none">
          Academic Timeline
        </button>
        <button type="button"
                ng-click="vm.setTab('viewing')"
                ng-class="vm.isTab('viewing') ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                class="px-3 py-2 text-sm font-medium border-b-2 focus:outline-none">
          Viewing Windows
        </button>
        <button type="button"
                ng-click="vm.setTab('application')"
                ng-class="vm.isTab('application') ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                class="px-3 py-2 text-sm font-medium border-b-2 focus:outline-none">
          Application/Reconciliation
        </button>
        <button type="button"
                ng-click="vm.setTab('installments')"
                ng-class="vm.isTab('installments') ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                class="px-3 py-2 text-sm font-medium border-b-2 focus:outline-none">
          Installments
        </button>
        <button type="button"
                ng-click="vm.setTab('flags')"
                ng-class="vm.isTab('flags') ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                class="px-3 py-2 text-sm font-medium border-b-2 focus:outline-none">
          Operational Flags
        </button>
      </nav>
    </div>

    <!-- Core -->
    <div ng-show="vm.isTab('core')">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Semester -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Semester</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.enumSem"
                  ng-options="s.value as s.label for s in vm.semesters">
          </select>
        </div>

        <!-- Year Start -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Year Start (YYYY)</label>
          <input type="text"
                 class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 placeholder="e.g. 2025"
                 ng-model="vm.model.strYearStart">
        </div>

        <!-- Year End -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Year End (YYYY)</label>
          <input type="text"
                 class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 placeholder="e.g. 2026"
                 ng-model="vm.model.strYearEnd">
        </div>

        <!-- Term Label -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Term Label</label>
          <input type="text"
                 class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 placeholder="Semester / Trimester / Quarter"
                 ng-model="vm.model.term_label">
        </div>

        <!-- Student Type -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Student Type</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.term_student_type"
                  ng-options="t.value as t.label for t in vm.studentTypes">
          </select>
        </div>

        <!-- Campus (read-only, sourced from sidebar selector) -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Campus</label>
          <div class="flex items-center h-10 px-3 rounded-md border border-gray-300 bg-gray-50 text-gray-700">
            <span class="truncate" ng-if="vm.model.campus_id">Campus ID: {{ vm.model.campus_id }}</span>
            <span class="truncate" ng-if="!vm.model.campus_id">All Campuses / None</span>
          </div>
          <p class="text-xs text-gray-500 mt-1">Set the campus from the global sidebar selector.</p>
        </div>
      </div>
    </div>

    <!-- Grading Windows -->
    <div ng-show="vm.isTab('grading')">
      <h2 class="text-lg font-medium text-gray-900">Grading Windows</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Midterm Start</label>
            <input type="date"
                   class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                   ng-model="vm.model.midterm_start"
                   ng-model-options="{ timezone: 'UTC' }">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Midterm End</label>
            <input type="date"
                   class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                   ng-model="vm.model.midterm_end"
                   ng-model-options="{ timezone: 'UTC' }">
          </div>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Final Start</label>
            <input type="date"
                   class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                   ng-model="vm.model.final_start"
                   ng-model-options="{ timezone: 'UTC' }">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Final End</label>
            <input type="date"
                   class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                   ng-model="vm.model.final_end"
                   ng-model-options="{ timezone: 'UTC' }">
          </div>
        </div>
      </div>

      <!-- End of Submission -->
      <div class="mt-6">
        <label class="block text-sm font-medium text-gray-700 mb-1">End of Submission</label>
        <input type="date"
               class="block w-full md:w-1/2 rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
               ng-model="vm.model.end_of_submission"
               ng-model-options="{ timezone: 'UTC' }">
      </div>
    </div>

    <!-- Academic Timeline -->
    <div ng-show="vm.isTab('academic')">
      <h2 class="text-lg font-medium text-gray-900">Academic Timeline</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Start of Classes</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.start_of_classes" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Final Exam Start</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.final_exam_start" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Final Exam End</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.final_exam_end" ng-model-options="{ timezone: 'UTC' }">
        </div>
      </div>
    </div>

    <!-- Viewing Windows -->
    <div ng-show="vm.isTab('viewing')">
      <h2 class="text-lg font-medium text-gray-900">Viewing Windows</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Viewing Midterm Start</label>
            <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                   ng-model="vm.model.viewing_midterm_start" ng-model-options="{ timezone: 'UTC' }">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Viewing Midterm End</label>
            <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                   ng-model="vm.model.viewing_midterm_end" ng-model-options="{ timezone: 'UTC' }">
          </div>
        </div>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Viewing Final Start</label>
            <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                   ng-model="vm.model.viewing_final_start" ng-model-options="{ timezone: 'UTC' }">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Viewing Final End</label>
            <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                   ng-model="vm.model.viewing_final_end" ng-model-options="{ timezone: 'UTC' }">
          </div>
        </div>
      </div>
    </div>

    <!-- Application/Reconciliation -->
    <div ng-show="vm.isTab('application')">
      <h2 class="text-lg font-medium text-gray-900">Application / Reconciliation</h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mt-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">End of Application Period</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.endOfApplicationPeriod" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Reconf Start</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.reconf_start" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Reconf End</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.reconf_end" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">AR Report Date Generation</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.ar_report_date_generation" ng-model-options="{ timezone: 'UTC' }">
        </div>
      </div>
    </div>

    <!-- Installments -->
    <div ng-show="vm.isTab('installments')">
      <h2 class="text-lg font-medium text-gray-900">Installment Schedule</h2>
      <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mt-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Installment 1</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.installment1" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Installment 2</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.installment2" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Installment 3</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.installment3" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Installment 4</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.installment4" ng-model-options="{ timezone: 'UTC' }">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Installment 5</label>
          <input type="date" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 ng-model="vm.model.installment5" ng-model-options="{ timezone: 'UTC' }">
        </div>
      </div>
    </div>

    <!-- Operational Flags -->
    <div ng-show="vm.isTab('flags')">
      <h2 class="text-lg font-medium text-gray-900">Operational Flags &amp; Status</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Class Type</label>
          <input type="text" class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                 placeholder="e.g. regular"
                 ng-model="vm.model.classType">
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Pay Student Visa</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.pay_student_visa">
            <option value="">—</option>
            <option value="1">Yes</option>
            <option value="0">No</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Locked</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.is_locked">
            <option value="">—</option>
            <option value="1">Yes</option>
            <option value="0">No</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Grading Period</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.enumGradingPeriod">
            <option value="">—</option>
            <option value="active">active</option>
            <option value="inactive">inactive</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Midterm Grading Period</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.enumMGradingPeriod">
            <option value="">—</option>
            <option value="active">active</option>
            <option value="inactive">inactive</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Final Grading Period</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.enumFGradingPeriod">
            <option value="">—</option>
            <option value="active">active</option>
            <option value="inactive">inactive</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Processing</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.intProcessing">
            <option value="">—</option>
            <option value="1">Yes</option>
            <option value="0">No</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.enumStatus">
            <option value="">—</option>
            <option value="active">active</option>
            <option value="inactive">inactive</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Finalized</label>
          <select class="block w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500"
                  ng-model="vm.model.enumFinalized">
            <option value="">—</option>
            <option value="yes">yes</option>
            <option value="no">no</option>
          </select>
        </div>
      </div>
    </div>
  </div>
</div>
