<!-- Top Nav Header (modeled after CI views/common/header.php) -->
<div class="bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-50">
  <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between gap-6">
    <div class="flex items-center gap-3">      
      <!-- Global Campus Selector (admin only; hidden for student logins) -->
      <label class="text-sm" ng-if="vm.state && vm.state.loginType !== 'student' && vm.hasRole('admin')">Campus:</label>
      <campus-selector
        ng-if="vm.state && vm.state.loginType !== 'student' && vm.hasRole('admin')"
        compact="true"
        show-label="false"></campus-selector>

      <!-- Global Academic Term Selector -->
      <label class="text-sm">Term:</label>
      <term-selector
        compact="true"
        show-label="false"></term-selector>
    </div>
    <div class="flex items-center gap-4">
      <button type="button"
              class="text-sm text-blue-600 hover:text-blue-700"
              ng-click="vm.goToEmployeePortal()">
        Employee Portal
      </button>
      <!-- Quick access link to Cashier Admin (visible to cashier_admin/admin) -->
      <a ng-if="vm.canAccess('/cashier-admin')"
         href="#!/cashier-admin"
         class="text-sm text-gray-700 hover:text-gray-900">
        Cashier Admin
      </a>

      <!-- Alerts bell with counter and dropdown -->
      <div class="relative"
           ng-mouseleave="vm.scheduleCloseAlertMenu()"
           ng-mouseenter="vm.cancelCloseAlertMenu()">
        <button type="button"
                class="relative flex items-center"
                ng-click="vm.toggleAlertMenu()">
          <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-gray-200 text-gray-600">
            <span class="fas fa-bell"></span>
          </span>
          <span ng-if="vm.alerts.length > 0"
                class="absolute -top-1 -right-1 text-xs leading-none px-1.5 py-1 rounded-full bg-red-600 text-white">
            {{ vm.alerts.length }}
          </span>
        </button>
        <div class="absolute right-0 mt-2 w-96 bg-white border rounded shadow z-10"
             ng-show="vm.alertMenuOpen"
             ng-mouseenter="vm.cancelCloseAlertMenu()"
             ng-mouseleave="vm.scheduleCloseAlertMenu()">
          <div class="px-3 py-2 border-b flex items-center justify-between">
            <span class="text-sm font-semibold text-gray-800">Notifications</span>
            <button type="button"
                    class="text-xs text-blue-600 hover:text-blue-700"
                    ng-click="vm.dismissAll()"
                    ng-disabled="!vm.alerts.length">
              Dismiss All
            </button>
          </div>
          <div class="max-h-80 overflow-auto">
            <div class="p-3 text-sm text-gray-500" ng-if="!vm.alerts.length">
              No alerts
            </div>
            <div ng-repeat="a in vm.alerts track by a.id"
                 class="px-3 py-2 border-b last:border-b-0"
                 ng-class="{'cursor-pointer hover:bg-gray-50': a.link}"
                 ng-click="a.link && vm.openAlert(a)">
              <div class="flex items-start gap-2">
                <span class="fas mt-0.5"
                      ng-class="{
                        'fa-check-circle text-green-600': a.type === 'success',
                        'fa-exclamation-triangle text-yellow-600': a.type === 'warning',
                        'fa-exclamation-circle text-red-600': a.type === 'error',
                        'fa-info-circle text-blue-600': !a.type || a.type === 'info'
                      }"></span>
                <div class="min-w-0 flex-1">
                  <div class="text-sm font-medium" ng-if="a.title" ng-bind="a.title"></div>
                  <div class="text-xs text-gray-700 break-words" ng-bind="a.message"></div>
                </div>
                <button type="button"
                        class="text-xs text-gray-500 hover:text-gray-700"
                        title="Dismiss"
                        ng-click="$event.stopPropagation(); vm.dismissAlert(a)">
                  Dismiss
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="relative" 
           ng-mouseleave="vm.scheduleCloseUserMenu()" 
           ng-mouseenter="vm.cancelCloseUserMenu()">
        <button type="button" 
                class="flex items-center gap-2 text-sm text-gray-700 hover:text-gray-900" 
                ng-click="vm.toggleUserMenu()">
          <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-gray-200 text-gray-600">
            <span class="fas fa-user"></span>
          </span>
          <span ng-if="vm.state && vm.state.username">{{ vm.state.username }}</span>
          <span ng-if="!vm.state">Guest</span>
          <span class="fas fa-caret-down"></span>
        </button>
        <div class="absolute right-0 mt-2 w-48 bg-white border rounded shadow z-10" 
             ng-show="vm.userMenuOpen"
             ng-mouseenter="vm.cancelCloseUserMenu()"
             ng-mouseleave="vm.scheduleCloseUserMenu()">
          <a class="block px-4 py-2 text-sm hover:bg-gray-50" href="#!/faculty/profile">My Profile</a>
          <a class="block px-4 py-2 text-sm hover:bg-gray-50" href="#!/faculty/settings">Edit Profile</a>
          <button class="w-full text-left px-4 py-2 text-sm hover:bg-gray-50" ng-click="vm.logout()">Sign out</button>
        </div>
      </div>
    </div>
  </div>
</div>
