<div class="max-w-5xl mx-auto bg-white shadow rounded p-6" ng-cloak>
  <h1 class="text-2xl font-bold text-gray-800 mb-4">Application Form</h1>
  <p class="text-sm text-gray-600 mb-6">Fill out the form below. On submit, your application will be saved and a confirmation email will be sent.</p>  
  <form name="applyForm" novalidate ng-submit="vm.submit()">
    <fieldset class="mb-6">
      <legend class="text-lg font-semibold text-gray-700 mb-3">Basic Information</legend>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">First Name <span class="text-red-500">*</span></label>
          <input type="text" name="first_name" class="w-full border rounded px-3 py-2" ng-model="vm.form.first_name" ng-class="{'border-red-500': applyForm.first_name.$dirty &amp;&amp; applyForm.first_name.$invalid}" required />
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.first_name.$dirty &amp;&amp; applyForm.first_name.$error.required">First name is required.</div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Middle Name</label>
          <input type="text" class="w-full border rounded px-3 py-2" ng-model="vm.form.middle_name" />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Last Name <span class="text-red-500">*</span></label>
          <input type="text" name="last_name" class="w-full border rounded px-3 py-2" ng-model="vm.form.last_name" ng-class="{'border-red-500': applyForm.last_name.$dirty &amp;&amp; applyForm.last_name.$invalid}" required />
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.last_name.$dirty &amp;&amp; applyForm.last_name.$error.required">Last name is required.</div>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
          <select class="w-full border rounded px-3 py-2" ng-model="vm.form.gender" ng-options="g for g in vm.genders">
            <option value="">-- Select --</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Date of Birth <span class="text-red-500">*</span></label>
          <input type="date" class="w-full border rounded px-3 py-2" ng-model="vm.form.date_of_birth" required />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Campus <span class="text-red-500">*</span></label>
          <select name="campus" class="w-full border rounded px-3 py-2"
                  ng-model="vm.selectedCampus"
                  ng-options="c as (c.campus_name || c.name || ('Campus #' + c.id)) for c in vm.campuses track by c.id"
                  ng-change="vm.onCampusChange()"
                  ng-class="{'border-red-500': applyForm.campus.$dirty &amp;&amp; applyForm.campus.$invalid}"
                  required>
            <option value="">-- Select --</option>
          </select>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.campus.$dirty &amp;&amp; applyForm.campus.$error.required">Campus is required.</div>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Country of Citizenship <span class="text-red-500">*</span></label>
          <select name="citizenship_country" class="w-full border rounded px-3 py-2"
                  ng-model="vm.form.citizenship_country"
                  ng-options="c for c in vm.countries"
                  ng-class="{'border-red-500': applyForm.citizenship_country.$dirty &amp;&amp; applyForm.citizenship_country.$invalid}"
                  required>
            <option value="">-- Select --</option>
          </select>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.citizenship_country.$dirty &amp;&amp; applyForm.citizenship_country.$error.required">
            Country of citizenship is required.
          </div>
        </div>
      </div>
    </fieldset>

    <fieldset class="mb-6">
      <legend class="text-lg font-semibold text-gray-700 mb-3">Program</legend>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Student Level<span class="text-red-500">*</span></label>
          <select name="student_type" class="w-full border rounded px-3 py-2"
                  ng-model="vm.form.student_type"
                  ng-options="t for t in vm.termTypes"
                  ng-change="vm.onTermTypeChange()"
                  ng-disabled="vm.loadingTerms || !vm.termTypes.length"
                  ng-class="{'border-red-500': applyForm.student_type.$dirty &amp;&amp; applyForm.student_type.$invalid}"
                  required>
            <option value="">-- Select --</option>
          </select>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.student_type.$dirty &amp;&amp; applyForm.student_type.$error.required">Student level is required.</div>
        </div>
        <div ng-if="vm.form.student_type">
          <label class="block text-sm font-medium text-gray-700 mb-1">Term <span class="text-red-500">*</span></label>
          <select name="term" class="w-full border rounded px-3 py-2"
                  ng-model="vm.form.term"
                  ng-options="t.intID as t._label for t in vm.termOptions"
                  ng-disabled="vm.loadingTerms || !vm.termOptions.length"
                  ng-class="{'border-red-500': applyForm.term.$dirty &amp;&amp; applyForm.term.$invalid}"
                  required>
            <option value="">-- Select --</option>
          </select>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.term.$dirty &amp;&amp; applyForm.term.$error.required">Term is required.</div>
        </div>
        <div ng-if="vm.form.student_type">
          <label class="block text-sm font-medium text-gray-700 mb-1">Program (First Choice) <span class="text-red-500">*</span></label>
          <select name="type_id" class="w-full border rounded px-3 py-2" ng-model="vm.form.type_id" ng-options="p.id as p.title for p in vm.programs" ng-class="{'border-red-500': applyForm.type_id.$dirty &amp;&amp; applyForm.type_id.$invalid}" required>
            <option value="">-- Select --</option>
          </select>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.type_id.$dirty &amp;&amp; applyForm.type_id.$error.required">Program is required.</div>
        </div>
      </div>

      <!-- Loading / empty-state messages for types/terms -->
      <div class="mt-2 text-sm text-gray-500" ng-if="vm.loadingTerms">
        Loading available student types and terms...
      </div>
      <div class="mt-2 text-sm text-amber-600" ng-if="!vm.loadingTerms &amp;&amp; vm.selectedCampus &amp;&amp; vm.termTypes.length === 0">
        No open application student types for the selected campus at this time.
      </div>
      <div class="mt-2 text-sm text-amber-600" ng-if="!vm.loadingTerms &amp;&amp; vm.form.student_type &amp;&amp; vm.termOptions.length === 0">
        No open terms for the selected student type.
      </div>
    </fieldset>

    <!-- Applicant Types -->
    <fieldset class="mb-6" ng-if="vm.form.student_type">
      <legend class="text-lg font-semibold text-gray-700 mb-3">Applicant Type <span class="text-sm italic text-gray-500">(Select one)</span></legend>
      <div class="border rounded p-4">
        <div class="text-sm text-gray-500" ng-if="vm.loadingApplicantTypes">
          Loading applicant types...
        </div>
        <div class="text-sm text-amber-600" ng-if="!vm.loadingApplicantTypes &amp;&amp; vm.totalApplicantTypeCount === 0">
          No applicant types available for the selected student level.
        </div>
        <div ng-if="!vm.loadingApplicantTypes &amp;&amp; vm.totalApplicantTypeCount > 0" class="space-y-4">
          <div ng-repeat="group in vm.applicantTypeGroupOrder" ng-if="vm.applicantTypesByGroup[group] &amp;&amp; vm.applicantTypesByGroup[group].length">
            <div class="text-gray-700 font-semibold mb-1">{{ group }}</div>
            <div class="grid grid-cols-1 gap-1 pl-2">
              <label class="inline-flex items-center" ng-repeat="t in vm.applicantTypesByGroup[group] track by t.id">
                <input type="radio" name="applicant_type_id" ng-model="vm.form.applicant_type_id" ng-value="t.id" required />
                <span class="ml-2">{{ t.name }}</span>
              </label>
            </div>
          </div>
        </div>
        <div class="text-xs text-red-600 mt-1" ng-if="applyForm.applicant_type_id.$dirty &amp;&amp; applyForm.applicant_type_id.$error.required">
          Applicant type is required.
        </div>
      </div>
    </fieldset>

    <fieldset class="mb-6">
      <legend class="text-lg font-semibold text-gray-700 mb-3">Contact Information</legend>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Email Address <span class="text-red-500">*</span></label>
          <input type="email" name="email" class="w-full border rounded px-3 py-2" ng-model="vm.form.email" ng-class="{'border-red-500': applyForm.email.$dirty &amp;&amp; applyForm.email.$invalid}" required />
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.email.$dirty &amp;&amp; applyForm.email.$error.required">Email is required.</div>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.email.$dirty &amp;&amp; !applyForm.email.$error.required &amp;&amp; applyForm.email.$error.email">Enter a valid email address.</div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Confirm Email Address <span class="text-red-500">*</span></label>
          <input type="email" name="email_confirmation" class="w-full border rounded px-3 py-2" ng-model="vm.form.email_confirmation" ng-class="{'border-red-500': (applyForm.email_confirmation.$dirty &amp;&amp; applyForm.email_confirmation.$invalid) || (vm.form.email &amp;&amp; vm.form.email_confirmation &amp;&amp; vm.form.email !== vm.form.email_confirmation)}" required />
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.email_confirmation.$dirty &amp;&amp; applyForm.email_confirmation.$error.required">Confirmation email is required.</div>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.email_confirmation.$dirty &amp;&amp; !applyForm.email_confirmation.$error.required &amp;&amp; applyForm.email_confirmation.$error.email">Enter a valid email address.</div>
          <div class="text-xs text-red-600 mt-1" ng-if="vm.form.email &amp;&amp; vm.form.email_confirmation &amp;&amp; vm.form.email !== vm.form.email_confirmation">Email addresses do not match.</div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number <span class="text-red-500">*</span></label>
          <input type="tel" name="mobile_number" class="w-full border rounded px-3 py-2" ng-model="vm.form.mobile_number" iti-tel ng-class="{'border-red-500': applyForm.mobile_number.$dirty &amp;&amp; applyForm.mobile_number.$invalid}" required />
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.mobile_number.$dirty &amp;&amp; applyForm.mobile_number.$error.required">Mobile number is required.</div>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.mobile_number.$dirty &amp;&amp; !applyForm.mobile_number.$error.required &amp;&amp; applyForm.mobile_number.$error.tel">Enter a valid mobile number.</div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Confirm Mobile Number <span class="text-red-500">*</span></label>
          <input type="tel" name="mobile_number_confirmation" class="w-full border rounded px-3 py-2" ng-model="vm.form.mobile_number_confirmation" iti-tel ng-class="{'border-red-500': (applyForm.mobile_number_confirmation.$dirty &amp;&amp; applyForm.mobile_number_confirmation.$invalid) || (vm.form.mobile_number &amp;&amp; vm.form.mobile_number_confirmation &amp;&amp; vm.form.mobile_number !== vm.form.mobile_number_confirmation)}" required />
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.mobile_number_confirmation.$dirty &amp;&amp; applyForm.mobile_number_confirmation.$error.required">Confirmation mobile number is required.</div>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.mobile_number_confirmation.$dirty &amp;&amp; !applyForm.mobile_number_confirmation.$error.required &amp;&amp; applyForm.mobile_number_confirmation.$error.tel">Enter a valid mobile number.</div>
          <div class="text-xs text-red-600 mt-1" ng-if="vm.form.mobile_number &amp;&amp; vm.form.mobile_number_confirmation &amp;&amp; vm.form.mobile_number !== vm.form.mobile_number_confirmation">Mobile numbers do not match.</div>
        </div>
      </div>
    </fieldset>

       <!-- Parent's Information -->
    <fieldset class="mb-6">
      <legend class="text-lg font-semibold text-gray-700 mb-3 uppercase">Parent's Information</legend>

      <!-- Mother -->
      <div class="border rounded p-4 mb-4">
        <div class="flex items-center justify-between mb-2">
          <h4 class="text-md font-semibold text-gray-700">Mother</h4>
          <label class="inline-flex items-center">
            <input type="radio" name="primary_contact" ng-model="vm.form.primary_contact" ng-value="'mother'">
            <span class="ml-2 text-sm text-gray-700 uppercase">Set as Primary Contact</span>
          </label>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
            <input type="text" name="mother_name" class="w-full border rounded px-3 py-2" placeholder="write 'n/a' only if not applicable" ng-model="vm.form.mother_name" />
            <div class="text-xs text-gray-500 mt-1">(write 'n/a' only if not applicable)</div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Occupation</label>
            <input type="text" name="mother_occupation" class="w-full border rounded px-3 py-2" ng-model="vm.form.mother_occupation" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
            <input type="email" name="mother_email" class="w-full border rounded px-3 py-2" ng-model="vm.form.mother_email" ng-class="{'border-red-500': applyForm.mother_email.$dirty &amp;&amp; applyForm.mother_email.$invalid}" />
            <div class="text-xs text-red-600 mt-1" ng-if="applyForm.mother_email.$dirty &amp;&amp; applyForm.mother_email.$error.email">Enter a valid email address.</div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number</label>
            <input type="tel" name="mother_mobile" class="w-full border rounded px-3 py-2" ng-model="vm.form.mother_mobile" iti-tel ng-class="{'border-red-500': applyForm.mother_mobile.$dirty &amp;&amp; applyForm.mother_mobile.$error.tel}" />
            <div class="text-xs text-red-600 mt-1" ng-if="applyForm.mother_mobile.$dirty &amp;&amp; applyForm.mother_mobile.$error.tel">Enter a valid mobile number.</div>
          </div>
        </div>
      </div>

      <!-- Father -->
      <div class="border rounded p-4 mb-4">
        <div class="flex items-center justify-between mb-2">
          <h4 class="text-md font-semibold text-gray-700">Father</h4>
          <label class="inline-flex items-center">
            <input type="radio" name="primary_contact" ng-model="vm.form.primary_contact" ng-value="'father'">
            <span class="ml-2 text-sm text-gray-700 uppercase">Set as Primary Contact</span>
          </label>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
            <input type="text" name="father_name" class="w-full border rounded px-3 py-2" placeholder="write 'n/a' only if not applicable" ng-model="vm.form.father_name" />
            <div class="text-xs text-gray-500 mt-1">(write 'n/a' only if not applicable)</div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Occupation</label>
            <input type="text" name="father_occupation" class="w-full border rounded px-3 py-2" ng-model="vm.form.father_occupation" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
            <input type="email" name="father_email" class="w-full border rounded px-3 py-2" ng-model="vm.form.father_email" ng-class="{'border-red-500': applyForm.father_email.$dirty &amp;&amp; applyForm.father_email.$invalid}" />
            <div class="text-xs text-red-600 mt-1" ng-if="applyForm.father_email.$dirty &amp;&amp; applyForm.father_email.$error.email">Enter a valid email address.</div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number</label>
            <input type="tel" name="father_mobile" class="w-full border rounded px-3 py-2" ng-model="vm.form.father_mobile" iti-tel ng-class="{'border-red-500': applyForm.father_mobile.$dirty &amp;&amp; applyForm.father_mobile.$error.tel}" />
            <div class="text-xs text-red-600 mt-1" ng-if="applyForm.father_mobile.$dirty &amp;&amp; applyForm.father_mobile.$error.tel">Enter a valid mobile number.</div>
          </div>
        </div>
      </div>

      <!-- Guardian -->
      <div class="border rounded p-4">
        <div class="flex items-center justify-between mb-2">
          <h4 class="text-md font-semibold text-gray-700">Guardian</h4>
          <label class="inline-flex items-center">
            <input type="radio" name="primary_contact" ng-model="vm.form.primary_contact" ng-value="'guardian'">
            <span class="ml-2 text-sm text-gray-700 uppercase">Set as Primary Contact</span>
          </label>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
            <input type="text" name="guardian_name" class="w-full border rounded px-3 py-2" placeholder="write 'n/a' only if not applicable" ng-model="vm.form.guardian_name" />
            <div class="text-xs text-gray-500 mt-1">(write 'n/a' only if not applicable)</div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Relationship</label>
            <input type="text" name="guardian_relationship" class="w-full border rounded px-3 py-2" ng-model="vm.form.guardian_relationship" />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
            <input type="email" name="guardian_email" class="w-full border rounded px-3 py-2" ng-model="vm.form.guardian_email" ng-class="{'border-red-500': applyForm.guardian_email.$dirty &amp;&amp; applyForm.guardian_email.$invalid}" />
            <div class="text-xs text-red-600 mt-1" ng-if="applyForm.guardian_email.$dirty &amp;&amp; applyForm.guardian_email.$error.email">Enter a valid email address.</div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Mobile Number</label>
            <input type="tel" name="guardian_mobile" class="w-full border rounded px-3 py-2" ng-model="vm.form.guardian_mobile" iti-tel ng-class="{'border-red-500': applyForm.guardian_mobile.$dirty &amp;&amp; applyForm.guardian_mobile.$error.tel}" />
            <div class="text-xs text-red-600 mt-1" ng-if="applyForm.guardian_mobile.$dirty &amp;&amp; applyForm.guardian_mobile.$error.tel">Enter a valid mobile number.</div>
          </div>
        </div>
      </div>

      <div class="text-xs text-red-600 mt-2" ng-if="applyForm.$submitted &amp;&amp; !vm.validateParentContacts()">
        Please provide at least one parent or guardian with name and either email address or mobile number.
      </div>
    </fieldset>
  

    <fieldset class="mb-6">
      <legend class="text-lg font-semibold text-gray-700 mb-3 uppercase">Educational Background</legend>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div class="md:col-span-1">
          <label class="block text-sm font-medium text-gray-700 mb-1">Last School Attended</label>
          <select class="w-full border rounded px-3 py-2"
                  ng-model="vm.educ.selected"
                  ng-change="vm.onPreviousSchoolChange()"
                  ng-disabled="vm.educ.notOnList"
                  ng-options="s as (s.name) for s in vm.previousSchools track by s.id">
            <option value="">-- Select --</option>
          </select>

          <div class="mt-2 flex items-center space-x-2">
            <input id="ps-not-on-list" type="checkbox" class="form-checkbox"
                   ng-model="vm.educ.notOnList" ng-change="vm.toggleNotOnList()" />
            <label for="ps-not-on-list" class="text-sm text-gray-700">NOT ON THE LIST</label>
          </div>

          <div class="mt-2" ng-if="vm.educ.notOnList">
            <input type="text" class="w-full border rounded px-3 py-2"
                   placeholder="Enter School Name"
                   ng-model="vm.form.previous_school_name" />
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">City</label>
          <input type="text" class="w-full border rounded px-3 py-2"
                 ng-model="vm.form.previous_school_city"
                 ng-disabled="!vm.educ.notOnList" />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">State/Province</label>
          <input type="text" class="w-full border rounded px-3 py-2"
                 ng-model="vm.form.previous_school_province"
                 ng-disabled="!vm.educ.notOnList" />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
          <input type="text" class="w-full border rounded px-3 py-2"
                 ng-model="vm.form.previous_school_country"
                 ng-disabled="!vm.educ.notOnList" />
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Grade/Year Level</label>
          <input type="text" class="w-full border rounded px-3 py-2" ng-model="vm.form.grade_year_level" />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Program/Strand/Degree earned</label>
          <input type="text" class="w-full border rounded px-3 py-2" ng-model="vm.form.program_strand_degree" />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            LRN <span class="text-gray-500 text-xs">(For Junior High School Applicants)</span>
          </label>
          <input type="text" class="w-full border rounded px-3 py-2" ng-model="vm.form.lrn_number" />
        </div>
      </div>
    </fieldset>

    <fieldset class="mb-6">
      <legend class="text-lg font-semibold text-gray-700 mb-3">Address</legend>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="md:col-span-2">
          <label class="block text-sm font-medium text-gray-700 mb-1">Home Number/Street/Subdivision <span class="text-red-500">*</span></label>
          <input type="text" class="w-full border rounded px-3 py-2" ng-model="vm.form.address" required />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">City <span class="text-red-500">*</span></label>
          <input type="text" class="w-full border rounded px-3 py-2" ng-model="vm.form.city" required />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">State/Province <span class="text-red-500">*</span></label>
          <input type="text" class="w-full border rounded px-3 py-2" ng-model="vm.form.province" required />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Country <span class="text-red-500">*</span></label>
          <select class="w-full border rounded px-3 py-2"
                  ng-model="vm.form.country"
                  ng-options="c for c in vm.countries"
                  required>
            <option value="">-- Select --</option>
          </select>
        </div>
      </div>
    </fieldset>


    <!-- Additional Information -->
    <fieldset class="mb-6">
      <legend class="text-lg font-semibold text-gray-700 mb-3 uppercase">Additional Information</legend>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Good Moral Standing -->
        <div class="border rounded p-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Do you hold good moral standing in your previous school? <span class="text-red-500">*</span>
          </label>
          <div class="space-y-1">
            <label class="inline-flex items-center mr-4">
              <input type="radio" name="good_moral_standing" ng-model="vm.form.good_moral_standing" ng-value="true" required />
              <span class="ml-2">Yes</span>
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="good_moral_standing" ng-model="vm.form.good_moral_standing" ng-value="false" required />
              <span class="ml-2">No</span>
            </label>
          </div>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.good_moral_standing.$dirty &amp;&amp; applyForm.good_moral_standing.$error.required">
            This field is required.
          </div>
        </div>

        <!-- Illegal Activities -->
        <div class="border rounded p-4">
          <label class="block text-sm font-medium text-gray-700 mb-2">
            Have you involved of any illegal activities? <span class="text-red-500">*</span>
          </label>
          <div class="space-y-1">
            <label class="inline-flex items-center mr-4">
              <input type="radio" name="illegal_activities_involved" ng-model="vm.form.illegal_activities_involved" ng-value="true" required />
              <span class="ml-2">Yes</span>
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="illegal_activities_involved" ng-model="vm.form.illegal_activities_involved" ng-value="false" required />
              <span class="ml-2">No</span>
            </label>
          </div>
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.illegal_activities_involved.$dirty &amp;&amp; applyForm.illegal_activities_involved.$error.required">
            This field is required.
          </div>
        </div>
      </div>

      <div class="mt-6">
        <h4 class="text-md font-semibold text-gray-700 mb-2">Health Conditions</h4>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Hospitalized Before -->
          <div class="border rounded p-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Have you been hospitalized before? <span class="text-red-500">*</span>
            </label>
            <div class="space-y-1">
              <label class="inline-flex items-center mr-4">
                <input type="radio" name="hospitalized_before" ng-model="vm.form.hospitalized_before" ng-value="true" required />
                <span class="ml-2">Yes</span>
              </label>
              <label class="inline-flex items-center">
                <input type="radio" name="hospitalized_before" ng-model="vm.form.hospitalized_before" ng-value="false" required />
                <span class="ml-2">No</span>
              </label>
            </div>
            <div class="text-xs text-red-600 mt-1" ng-if="applyForm.hospitalized_before.$dirty &amp;&amp; applyForm.hospitalized_before.$error.required">
              This field is required.
            </div>
          </div>

          <!-- Health Conditions Checkbox Group -->
          <div class="border rounded p-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Do you have any of the following? <span class="text-gray-500 text-xs">(check all that apply)</span>
            </label>
            <div class="grid grid-cols-1 gap-2">
              <label class="inline-flex items-center">
                <input type="checkbox" ng-model="vm.form.health_conditions.diabetes" />
                <span class="ml-2">Diabetes</span>
              </label>
              <label class="inline-flex items-center">
                <input type="checkbox" ng-model="vm.form.health_conditions.allergies" />
                <span class="ml-2">Allergies</span>
              </label>
              <label class="inline-flex items-center">
                <input type="checkbox" ng-model="vm.form.health_conditions.high_blood" />
                <span class="ml-2">High Blood</span>
              </label>
              <label class="inline-flex items-center">
                <input type="checkbox" ng-model="vm.form.health_conditions.anemia" />
                <span class="ml-2">Anemia</span>
              </label>
              <div>
                <label class="inline-flex items-center">
                  <input type="checkbox" ng-model="vm.form.health_conditions.others" />
                  <span class="ml-2">Others (please specify)</span>
                </label>
                <div class="mt-2" ng-if="vm.form.health_conditions.others">
                  <input type="text" class="w-full border rounded px-3 py-2" placeholder="Please specify" ng-model="vm.form.health_conditions.others_specify" />
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Other Health Concerns -->
        <div class="mt-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Other health concerns/conditions <span class="text-red-500">*</span>
          </label>
          <input type="text"
                 name="other_health_concerns"
                 class="w-full border rounded px-3 py-2"
                 placeholder="Type 'none' if you do not have any"
                 ng-model="vm.form.other_health_concerns"
                 required />
          <div class="text-xs text-red-600 mt-1" ng-if="applyForm.other_health_concerns.$dirty &amp;&amp; applyForm.other_health_concerns.$error.required">
            This field is required.
          </div>
        </div>
      </div>
    </fieldset>

    <div class="mb-4" ng-if="vm.error">
      <div class="bg-red-100 border border-red-300 text-red-700 px-4 py-3 rounded">
        {{ vm.error }}
      </div>
    </div>

    <div class="flex items-center justify-end">
      <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" ng-disabled="vm.loading">
        <span ng-if="!vm.loading">Submit Application</span>
        <span ng-if="vm.loading">Submitting...</span>
      </button>
    </div>
  </form>
</div>
