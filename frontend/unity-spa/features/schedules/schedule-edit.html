<div class="container mx-auto px-6 py-8 max-w-6xl space-y-6">
  <!-- Page Header -->
  <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-bold text-gray-900">{{ vm.pageTitle }}</h1>
        <p class="mt-1 text-sm text-gray-600">
          <span ng-if="vm.isAdd">Create a new classroom schedule</span>
          <span ng-if="vm.isEdit">Update classroom schedule information</span>
        </p>
      </div>
      <button type="button"
              class="inline-flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium rounded-md"
              ng-click="vm.cancel()">
        <i class="fas fa-arrow-left mr-2"></i>
        Back to List
      </button>
    </div>
  </div>

  <!-- Alert Messages -->
  <div ng-if="vm.error" class="bg-red-50 border border-red-200 rounded-lg p-4">
    <div class="flex">
      <div class="flex-shrink-0">
        <i class="fas fa-exclamation-circle text-red-400"></i>
      </div>
      <div class="ml-3">
        <p class="text-sm text-red-800">{{ vm.error }}</p>
      </div>
      <div class="ml-auto pl-3">
        <button type="button" ng-click="vm.clearAlert()" class="text-red-400 hover:text-red-600">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div ng-if="vm.loading" class="bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center">
    <div class="flex items-center justify-center">
      <i class="fas fa-spinner fa-spin text-blue-600 mr-2"></i>
      <span class="text-gray-600">Loading schedule data...</span>
    </div>
  </div>

  <!-- Form -->
  <div ng-if="!vm.loading" class="bg-white rounded-lg shadow-sm border border-gray-200">
    <form ng-submit="vm.save()" class="p-6 space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Schedule Code -->
        <div class="md:col-span-2">
          <label for="strScheduleCode" class="block text-sm font-medium text-gray-700 mb-2">
            Schedule Code <span class="text-red-500">*</span>
          </label>
          <input type="text" 
                 id="strScheduleCode"
                 ng-model="vm.form.strScheduleCode" 
                 placeholder="e.g., ENG1-BSCS-1-1-2"
                 maxlength="20"
                 required
                 class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
          <p class="mt-1 text-sm text-gray-500">Unique identifier for this schedule entry</p>
        </div>

        <!-- Academic Year -->
        <div>
          <label for="intSem" class="block text-sm font-medium text-gray-700 mb-2">
            Academic Year <span class="text-red-500">*</span>
          </label>
          <select id="intSem"
                  ng-model="vm.form.intSem" 
                  ng-change="vm.onAcademicYearChange()"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">Select academic year</option>
            <option ng-repeat="ay in vm.academicYears" value="{{ ay.intID }}">
              {{ ay.enumSem }} Term SY {{ ay.strYearStart }}-{{ ay.strYearEnd }}
            </option>
          </select>
        </div>

        <!-- Block Section -->
        <div class="md:col-span-2">
          <label for="strScheduleCode" class="block text-sm font-medium text-gray-700 mb-2">
            Block Section <span class="text-red-500">*</span>
          </label>
          <input type="text" 
                 id="blockSection"
                 ng-model="vm.form.blockSection" 
                 placeholder="e.g., MMA11"
                 maxlength="20"
                 required
                 class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                 <p class="mt-1 text-sm text-gray-500">Enter the block section for this schedule</p>          
        </div>        

        <!-- Classlist -->
        <div>
          <label for="intClasslistID" class="block text-sm font-medium text-gray-700 mb-2">
            Classlist <span class="text-red-500">*</span>
          </label>
          <select id="intClasslistID"
                  ng-model="vm.form.intClasslistID" 
                  ng-disabled="!vm.form.intSem || vm.loadingClasslists"
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">{{ vm.loadingClasslists ? 'Loading classlists...' : 'Select a classlist' }}</option>
            <option ng-repeat="classlist in (vm.availableClasslists | orderBy:'subject.strCode')" value="{{ classlist.intID }}">
              {{ vm.getClasslistLabel(classlist) }} - {{ vm.getFacultyName(classlist.faculty) }}
            </option>
          </select>
          <p class="mt-1 text-sm text-gray-500">Classlists are sorted by subject code and may include those with existing schedules</p>
        </div>

        <!-- Classroom -->
        <div>
          <label for="intRoomID" class="block text-sm font-medium text-gray-700 mb-2">
            Classroom <span class="text-red-500">*</span>
          </label>
          <select id="intRoomID"
                  ng-model="vm.form.intRoomID" 
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">Select a classroom</option>
            <option ng-repeat="classroom in vm.classrooms" 
                    value="{{ classroom.intID }}">
              {{ classroom.strRoomCode }}
              <span ng-if="classroom.description"> - {{ classroom.description }}</span>
              <span ng-if="classroom.enumType"> ({{ classroom.enumType }})</span>
            </option>
          </select>
        </div>

        <!-- Day -->
        <div>
          <label for="strDay" class="block text-sm font-medium text-gray-700 mb-2">
            Day <span class="text-red-500">*</span>
          </label>
          <select id="strDay"
                  ng-model="vm.form.strDay" 
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">Select a day</option>
            <option value="1">Monday</option>
            <option value="2">Tuesday</option>
            <option value="3">Wednesday</option>
            <option value="4">Thursday</option>
            <option value="5">Friday</option>
            <option value="6">Saturday</option>
            <option value="7">Sunday</option>
          </select>
        </div>

        <!-- Start Time -->
        <div>
          <label for="dteStart" class="block text-sm font-medium text-gray-700 mb-2">
            Start Time <span class="text-red-500">*</span>
          </label>
          <select id="dteStart"
                  ng-model="vm.form.dteStart" 
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">Select start time</option>
            <option ng-repeat="time in vm.timeSlots" value="{{ time }}">{{ time }}</option>
          </select>
        </div>

        <!-- End Time -->
        <div>
          <label for="dteEnd" class="block text-sm font-medium text-gray-700 mb-2">
            End Time <span class="text-red-500">*</span>
          </label>
          <select id="dteEnd"
                  ng-model="vm.form.dteEnd" 
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">Select end time</option>
            <option ng-repeat="time in vm.timeSlots" 
                    value="{{ time }}"
                    ng-disabled="vm.form.dteStart && time <= vm.form.dteStart">
              {{ time }}
            </option>
          </select>
          <p class="mt-1 text-sm text-gray-500">Must be after start time</p>
        </div>

        <!-- Class Type -->
        <div>
          <label for="enumClassType" class="block text-sm font-medium text-gray-700 mb-2">
            Class Type <span class="text-red-500">*</span>
          </label>
          <select id="enumClassType"
                  ng-model="vm.form.enumClassType" 
                  required
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            <option value="">Select class type</option>
            <option ng-repeat="type in vm.classTypes" value="{{ type.value }}">
              {{ type.label }}
            </option>
          </select>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="flex items-center justify-end space-x-4 pt-6 border-t border-gray-200">
        <button type="button" 
                ng-click="vm.cancel()"
                class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium rounded-md">
          Cancel
        </button>
        <button type="submit" 
                ng-disabled="vm.saving"
                class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white text-sm font-medium rounded-md">
          <i ng-if="vm.saving" class="fas fa-spinner fa-spin mr-2"></i>
          <span ng-if="!vm.saving">
            <span ng-if="vm.isAdd">Create Schedule</span>
            <span ng-if="vm.isEdit">Update Schedule</span>
          </span>
          <span ng-if="vm.saving">
            <span ng-if="vm.isAdd">Creating...</span>
            <span ng-if="vm.isEdit">Updating...</span>
          </span>
        </button>
      </div>
    </form>
  </div>
</div>
